{
  "version": "1.0",
  "map_id": "residential_v1",
  "name": "住宅街エリア",
  "name_en": "Residential Area",
  "description": "Version 1.0 住宅街エリア - チュートリアル + メインゲーム",
  "estimated_playtime": "20-30分",
  "dimensions": {
    "width": 40,
    "height": 30,
    "tile_size": 32
  },
  "spawn_point": {
    "x": 20,
    "y": 28,
    "direction": "north"
  },
  "zones": {
    "tutorial": {
      "name": "チュートリアルゾーン",
      "name_en": "Tutorial Zone",
      "bounds": {
        "x": 15,
        "y": 25,
        "width": 10,
        "height": 5
      },
      "description": "基本操作を学ぶエリア",
      "estimated_time": "5分"
    },
    "main_residential": {
      "name": "住宅街メインエリア",
      "name_en": "Main Residential Area",
      "bounds": {
        "x": 5,
        "y": 5,
        "width": 30,
        "height": 20
      },
      "description": "ペット救出のメインエリア",
      "estimated_time": "15-25分"
    }
  },
  "terrain": {
    "base_layer": "grass",
    "roads": [
      {
        "type": "main_road",
        "points": [
          {"x": 0, "y": 15},
          {"x": 40, "y": 15}
        ],
        "width": 3
      },
      {
        "type": "side_road",
        "points": [
          {"x": 20, "y": 0},
          {"x": 20, "y": 30}
        ],
        "width": 2
      }
    ],
    "sidewalks": [
      {
        "adjacent_to": "main_road",
        "width": 1
      },
      {
        "adjacent_to": "side_road", 
        "width": 1
      }
    ],
    "buildings": [
      {
        "id": "house_001",
        "type": "residential_house",
        "position": {"x": 8, "y": 8},
        "size": {"width": 4, "height": 3},
        "name": "田中さんの家",
        "name_en": "Tanaka's House",
        "image_path": "buildings/house_residential.png"
      },
      {
        "id": "house_002", 
        "type": "residential_house",
        "position": {"x": 25, "y": 8},
        "size": {"width": 4, "height": 3},
        "name": "佐藤さんの家",
        "name_en": "Sato's House",
        "image_path": "buildings/house_residential.png"
      },
      {
        "id": "house_003",
        "type": "residential_house", 
        "position": {"x": 8, "y": 18},
        "size": {"width": 4, "height": 3},
        "name": "鈴木さんの家",
        "name_en": "Suzuki's House",
        "image_path": "buildings/house_residential.png"
      },
      {
        "id": "house_004",
        "type": "residential_house",
        "position": {"x": 25, "y": 18},
        "size": {"width": 4, "height": 3},
        "name": "山田さんの家", 
        "name_en": "Yamada's House",
        "image_path": "buildings/house_residential.png"
      },
      {
        "id": "pet_shop",
        "type": "pet_shop",
        "position": {"x": 32, "y": 12},
        "size": {"width": 5, "height": 4},
        "name": "ペットショップ「わんにゃん」",
        "name_en": "Pet Shop 'Wan-Nyan'",
        "image_path": "buildings/house_petshop.png"
      }
    ],
    "natural_features": [
      {
        "id": "park_001",
        "type": "small_park",
        "position": {"x": 15, "y": 5},
        "size": {"width": 6, "height": 6},
        "name": "ちびっこ公園",
        "name_en": "Little Park",
        "features": ["playground", "bench", "trees", "flower_bed"],
        "image_path": "buildings/park_facility.png"
      },
      {
        "id": "garden_001",
        "type": "community_garden",
        "position": {"x": 5, "y": 22},
        "size": {"width": 8, "height": 4},
        "name": "みんなの花壇",
        "name_en": "Community Garden",
        "features": ["flowers", "vegetables", "tool_shed"],
        "image_path": "buildings/park_facility.png"
      }
    ]
  },
  "npcs": [
    {
      "id": "npc_elderly_woman",
      "name": "おばあちゃん",
      "name_en": "Grandmother",
      "type": "helpful_resident",
      "position": {"x": 16, "y": 7},
      "sprite": "npc_elderly_woman",
      "role": "tutorial_guide",
      "dialogue": {
        "initial": {
          "ja": "あら、あなたがペット探偵さんね。この辺りで迷子のペットを見かけたわよ。操作方法を教えてあげましょうか？",
          "en": "Oh, you must be the pet detective. I've seen some lost pets around here. Shall I teach you how to play?"
        },
        "tutorial_complete": {
          "ja": "上手にできたわね！きっと迷子のペットたちを助けられるわ。頑張って！",
          "en": "Well done! I'm sure you can help those lost pets. Good luck!"
        },
        "hints": [
          {
            "ja": "WASDキーで移動できるのよ。試してみて！",
            "en": "You can move with WASD keys. Try it!"
          },
          {
            "ja": "ペットに近づいてスペースキーを押すと話しかけられるわ。",
            "en": "Get close to pets and press Space to interact with them."
          },
          {
            "ja": "アイテムを使うときはインベントリを開いてね。",
            "en": "Open your inventory when you want to use items."
          }
        ]
      },
      "interaction_radius": 2,
      "movement_pattern": "stationary"
    },
    {
      "id": "npc_pet_shop_owner",
      "name": "ペットショップ店長",
      "name_en": "Pet Shop Owner",
      "type": "item_provider",
      "position": {"x": 34, "y": 14},
      "sprite": "npc_pet_shop_owner",
      "role": "item_supplier",
      "dialogue": {
        "initial": {
          "ja": "いらっしゃい！ペット探偵さんですね。迷子のペットを探すのに必要なアイテムをお渡しします。",
          "en": "Welcome! You're the pet detective, right? I'll give you items needed to find lost pets."
        },
        "items_given": {
          "ja": "これで準備万端ですね。迷子のペットたちをよろしくお願いします！",
          "en": "Now you're all set! Please take care of those lost pets!"
        },
        "repeat_visit": {
          "ja": "頑張って探してくださいね。何か困ったことがあったら声をかけてください。",
          "en": "Keep searching! Let me know if you need any help."
        }
      },
      "items_to_give": [
        {"item_id": "cat_food", "quantity": 1},
        {"item_id": "dog_treat", "quantity": 1},
        {"item_id": "carrot", "quantity": 1},
        {"item_id": "bird_seeds", "quantity": 1}
      ],
      "interaction_radius": 2,
      "movement_pattern": "shop_keeper"
    }
  ],
  "pet_hiding_spots": [
    {
      "id": "hiding_spot_001",
      "name": "公園の茂み",
      "name_en": "Park Bushes",
      "position": {"x": 17, "y": 9},
      "type": "bushes",
      "pet_id": "pet_cat_001",
      "discovery_difficulty": 2,
      "hints": [
        {
          "ja": "茂みの中から小さな鳴き声が聞こえる...",
          "en": "You hear a small meowing from the bushes..."
        },
        {
          "ja": "何かが茂みの中で動いているようだ。",
          "en": "Something seems to be moving in the bushes."
        }
      ],
      "required_items": ["cat_food"],
      "interaction_radius": 1.5
    },
    {
      "id": "hiding_spot_002", 
      "name": "家の裏庭",
      "name_en": "House Backyard",
      "position": {"x": 27, "y": 11},
      "type": "backyard",
      "pet_id": "pet_dog_001",
      "discovery_difficulty": 1,
      "hints": [
        {
          "ja": "裏庭から犬の鳴き声が聞こえてくる。",
          "en": "You can hear a dog barking from the backyard."
        },
        {
          "ja": "尻尾を振る音が聞こえる。",
          "en": "You hear the sound of a wagging tail."
        }
      ],
      "required_items": ["dog_treat"],
      "interaction_radius": 2
    },
    {
      "id": "hiding_spot_003",
      "name": "花壇の陰",
      "name_en": "Behind Flower Bed", 
      "position": {"x": 7, "y": 24},
      "type": "garden",
      "pet_id": "pet_rabbit_001",
      "discovery_difficulty": 3,
      "hints": [
        {
          "ja": "花壇の陰で何かが動いている気配がする。",
          "en": "You sense something moving behind the flower bed."
        },
        {
          "ja": "小さな足音が聞こえる...とても静かだ。",
          "en": "You hear tiny footsteps... very quiet."
        }
      ],
      "required_items": ["carrot"],
      "interaction_radius": 1
    },
    {
      "id": "hiding_spot_004",
      "name": "屋根の上",
      "name_en": "On the Roof",
      "position": {"x": 10, "y": 8},
      "type": "rooftop",
      "pet_id": "pet_bird_001", 
      "discovery_difficulty": 4,
      "hints": [
        {
          "ja": "屋根の上から鳥の鳴き声が聞こえる。",
          "en": "You hear bird chirping from the rooftop."
        },
        {
          "ja": "何かが屋根の上を歩き回っている音がする。",
          "en": "You hear something walking around on the roof."
        }
      ],
      "required_items": ["bird_seeds", "whistle"],
      "interaction_radius": 3,
      "special_requirements": {
        "puzzle_solved": "roof_access_puzzle"
      }
    }
  ],
  "items": [
    {
      "id": "item_spawn_001",
      "item_id": "toy_mouse",
      "position": {"x": 19, "y": 6},
      "type": "ground_item",
      "respawn": false,
      "hint": {
        "ja": "公園のベンチの下に何かが落ちている。",
        "en": "Something is dropped under the park bench."
      }
    },
    {
      "id": "item_spawn_002", 
      "item_id": "tennis_ball",
      "position": {"x": 30, "y": 20},
      "type": "ground_item",
      "respawn": false,
      "hint": {
        "ja": "家の前にボールが転がっている。",
        "en": "A ball is rolling in front of the house."
      }
    }
  ],
  "puzzle_points": [
    {
      "id": "roof_access_puzzle",
      "name": "屋根へのアクセス",
      "name_en": "Roof Access",
      "position": {"x": 12, "y": 10},
      "type": "ladder_puzzle",
      "difficulty": 2,
      "description": {
        "ja": "はしごを組み立てて屋根に登る必要がある。",
        "en": "You need to assemble a ladder to climb onto the roof."
      },
      "puzzle_data": {
        "type": "sequence_puzzle",
        "steps": [
          {
            "action": "find_ladder_parts",
            "description": {
              "ja": "はしごの部品を3つ見つける",
              "en": "Find 3 ladder parts"
            },
            "locations": [
              {"x": 6, "y": 12, "hint": "物置の後ろ"},
              {"x": 15, "y": 18, "hint": "ベンチの下"},
              {"x": 28, "y": 6, "hint": "家の横"}
            ]
          },
          {
            "action": "assemble_ladder",
            "description": {
              "ja": "はしごを正しい順序で組み立てる",
              "en": "Assemble the ladder in correct order"
            },
            "sequence": ["base", "middle", "top"]
          },
          {
            "action": "place_ladder",
            "description": {
              "ja": "はしごを家の壁に立てかける",
              "en": "Place the ladder against the house wall"
            }
          }
        ]
      },
      "reward": {
        "access_granted": "hiding_spot_004",
        "experience": 50
      },
      "hints": [
        {
          "ja": "この辺りにはしごの部品が散らばっているようだ。",
          "en": "Ladder parts seem to be scattered around here."
        },
        {
          "ja": "物置や家の周りを探してみよう。",
          "en": "Let's search around the shed and houses."
        }
      ]
    }
  ],
  "interactive_objects": [
    {
      "id": "bench_001",
      "type": "park_bench",
      "position": {"x": 18, "y": 6},
      "name": "公園のベンチ",
      "name_en": "Park Bench",
      "interactions": [
        {
          "type": "sit",
          "description": {
            "ja": "ベンチに座って休憩する",
            "en": "Sit on the bench and rest"
          },
          "effect": "restore_stamina"
        },
        {
          "type": "search",
          "description": {
            "ja": "ベンチの下を調べる",
            "en": "Search under the bench"
          },
          "hidden_item": "toy_mouse"
        }
      ]
    },
    {
      "id": "tool_shed_001",
      "type": "tool_shed",
      "position": {"x": 6, "y": 25},
      "name": "道具小屋",
      "name_en": "Tool Shed",
      "interactions": [
        {
          "type": "search",
          "description": {
            "ja": "道具小屋を調べる",
            "en": "Search the tool shed"
          },
          "hidden_item": "ladder_part_001"
        }
      ]
    },
    {
      "id": "mailbox_001",
      "type": "mailbox",
      "position": {"x": 7, "y": 11},
      "name": "郵便ポスト",
      "name_en": "Mailbox",
      "interactions": [
        {
          "type": "read",
          "description": {
            "ja": "郵便ポストの張り紙を読む",
            "en": "Read the notice on the mailbox"
          },
          "message": {
            "ja": "迷子のペット情報：青い鳥を探しています。屋根の上にいるかもしれません。",
            "en": "Lost Pet Info: Looking for a blue bird. It might be on the rooftop."
          }
        }
      ]
    }
  ],
  "ambient_sounds": [
    {
      "type": "birds_chirping",
      "position": {"x": 18, "y": 8},
      "radius": 5,
      "volume": 0.3
    },
    {
      "type": "traffic_distant",
      "position": {"x": 20, "y": 15},
      "radius": 10,
      "volume": 0.2
    },
    {
      "type": "wind_through_trees",
      "position": {"x": 17, "y": 9},
      "radius": 4,
      "volume": 0.25
    }
  ],
  "tutorial_sequence": [
    {
      "step": 1,
      "type": "movement",
      "instruction": {
        "ja": "WASDキーまたは矢印キーで移動してみましょう。",
        "en": "Try moving with WASD keys or arrow keys."
      },
      "target_position": {"x": 18, "y": 26},
      "completion_radius": 2
    },
    {
      "step": 2,
      "type": "interaction",
      "instruction": {
        "ja": "おばあちゃんに近づいてスペースキーで話しかけてみましょう。",
        "en": "Get close to the grandmother and press Space to talk."
      },
      "target_npc": "npc_elderly_woman"
    },
    {
      "step": 3,
      "type": "inventory",
      "instruction": {
        "ja": "Iキーでインベントリを開いてみましょう。",
        "en": "Press I key to open your inventory."
      }
    },
    {
      "step": 4,
      "type": "item_collection",
      "instruction": {
        "ja": "ペットショップでアイテムをもらいましょう。",
        "en": "Get items from the pet shop."
      },
      "target_npc": "npc_pet_shop_owner"
    },
    {
      "step": 5,
      "type": "pet_rescue",
      "instruction": {
        "ja": "公園の茂みで猫を探してみましょう。",
        "en": "Try to find the cat in the park bushes."
      },
      "target_spot": "hiding_spot_001"
    }
  ],
  "victory_conditions": {
    "primary": {
      "type": "rescue_all_pets",
      "description": {
        "ja": "すべてのペット（4匹）を救出する",
        "en": "Rescue all pets (4 animals)"
      },
      "required_pets": ["pet_cat_001", "pet_dog_001", "pet_rabbit_001", "pet_bird_001"]
    },
    "bonus_objectives": [
      {
        "type": "time_bonus",
        "description": {
          "ja": "20分以内にクリア",
          "en": "Clear within 20 minutes"
        },
        "time_limit": 1200,
        "reward": "speed_bonus"
      },
      {
        "type": "no_hints_used",
        "description": {
          "ja": "ヒントを使わずにクリア",
          "en": "Clear without using hints"
        },
        "reward": "detective_bonus"
      }
    ]
  },
  "metadata": {
    "created_date": "2025-06-24",
    "version": "1.0",
    "target_age": "10-14",
    "estimated_playtime": "20-30分",
    "difficulty": "beginner_friendly",
    "language_support": ["ja", "en"],
    "accessibility": {
      "colorblind_friendly": true,
      "keyboard_only": true,
      "subtitle_support": true
    }
  }
}
